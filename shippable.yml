language: none

#for docker
build:

  ci:
    - echo "hello"
    - readarray -t array <<< "$(git diff --name-only $SHIPPABLE_COMMIT_RANGE $COMMIT)"
    - echo "Hello"
    - for each in "${array[@]}"
    - do
	  - word1=$(echo "$each" | cut -d "/" -f2)
	  - echo $word1
	  - if [ -d "$word1" ] 
	  - then 
		- echo "**************************************************************"
		- pushd /home/kashish/Desktop/SampleNodeJS_TwoApps/"$word1"/	
		- echo "------------"
		- docker build -t kashishgrover/${word1,,}build:latest .
		- docker commit $SHIPPABLE_CONTAINER_NAME kashishgrover/${word1,,}build
		- docker push kashishgrover/${word1,,}build:latest
		- echo "------------"
		- popd
		- echo "**************************************************************"
	  - fi
    - done
    - echo "Hello"

integrations:
  hub:
    - integrationName: Kashish-Docker
      type: docker
      branches:
        only:
          - master
